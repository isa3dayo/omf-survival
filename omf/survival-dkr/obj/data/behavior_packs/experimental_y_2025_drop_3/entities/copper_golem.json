{
  "format_version": "1.21.100",
  "minecraft:entity": {
    "description": {
      "identifier": "minecraft:copper_golem",
      "is_spawnable": true,
      "is_summonable": true,
      "properties": {
        "minecraft:is_waxed": {
          "type": "bool",
          "default": false
        },
        "minecraft:oxidation_level": {
          "type": "enum",
          "values": [
            "unoxidized",
            "exposed",
            "weathered",
            "oxidized"
          ],
          "default": "unoxidized",
          "client_sync": true
        },
        "minecraft:chest_interaction": {
          "type": "enum",
          "values": [
            "none",
            "take",
            "take_fail",
            "put",
            "put_fail"
          ],
          "default": "none",
          "client_sync": true
        }
      }
    },
    "components": {
      "minecraft:is_hidden_when_invisible": {},
      "minecraft:type_family": {
        "family": [
          "copper_golem",
          "mob"
        ]
      },
      "minecraft:nameable": {},
      "minecraft:collision_box": {
        "width": 0.875,
        "height": 1
      },
      "minecraft:loot": {
        "table": "loot_tables/entities/copper_golem.json"
      },
      "minecraft:health": {
        "value": 12,
        "max": 12
      },
      "minecraft:movement": {
        "value": 0.2
      },
      "minecraft:navigation.walk": {
        "avoid_water": true,
        "avoid_damage_blocks": true
      },
      "minecraft:movement.basic": {},
      "minecraft:jump.static": {},
      "minecraft:can_climb": {},
      "minecraft:attack": {
        "damage": 2
      },
      "minecraft:hurt_on_condition": {
        "damage_conditions": [
          {
            "filters": {
              "test": "in_lava",
              "subject": "self",
              "operator": "==",
              "value": true
            },
            "cause": "lava",
            "damage_per_tick": 4
          }
        ]
      },
      "minecraft:leashable": {
        "presets": [
          {
            "soft_distance": 4.0,
            "hard_distance": 6.0,
            "max_distance": 10.0
          }
        ]
      },
      "minecraft:balloonable": {},
      "minecraft:behavior.panic": {
        "priority": 1,
        "speed_multiplier": 1.5
      },
      "minecraft:behavior.transport_items": {
        "priority": 2,
        "source_container_types": [
          "minecraft:copper_chest",
          "minecraft:exposed_copper_chest",
          "minecraft:oxidized_copper_chest",
          "minecraft:waxed_copper_chest",
          "minecraft:waxed_exposed_copper_chest",
          "minecraft:waxed_oxidized_copper_chest",
          "minecraft:waxed_weathered_copper_chest",
          "minecraft:weathered_copper_chest"
        ],
        "destination_container_types": [ "minecraft:chest" ],
        "max_stack_size": 16,
        "interaction_time": 3.0,
        "allow_simultaneous_interaction": false,
        "search_strategy": "nearest",
        "search_distance": [32, 8],
        "max_visited_containers": 10,
        "initial_cooldown": 3,
        "idle_cooldown": 7,
        "place_strategy": "with_matching_or_empty"
      },
      "minecraft:behavior.random_stroll": {
        "priority": 3,
        "xz_dist": 3
      },
      "minecraft:behavior.look_at_player": {
        "priority": 4,
        "look_distance": 6.0,
        "probability": 0.02
      },
      "minecraft:behavior.random_look_around": {
        "priority": 5
      },
      "minecraft:persistent": {},
      "minecraft:physics": {},
      "minecraft:pushable": {
        "is_pushable": true,
        "is_pushable_by_piston": true
      },
      "minecraft:conditional_bandwidth_optimization": {},
      "minecraft:damage_sensor": {
        "triggers": [
          {
            "on_damage": {
              "filters": {
                "all_of": [
                  {
                    "test": "is_family",
                    "subject": "other",
                    "value": "lightning"
                  },
                  {
                    "test": "is_variant",
                    "subject": "self",
                    "operator": "==",
                    "value": 0
                  }
                ]
              },
              "event": "minecraft:remove_oxidation_layer"
            },
            "deals_damage": "no"
          }
        ]
      },
      "minecraft:interact": {
        "interactions": [
          // Wax on
          {
            "on_interact": {
              "filters": {
                "all_of": [
                  {
                    "test": "bool_property",
                    "domain": "minecraft:is_waxed",
                    "value": false
                  },
                  {
                    "test": "is_family",
                    "subject": "other",
                    "value": "player"
                  },
                  {
                    "test": "has_equipment",
                    "domain": "hand",
                    "subject": "other",
                    "value": "honeycomb"
                  }
                ]
              },
              "event": "minecraft:wax_on"
            },
            "use_item": true,
            "swing": true,
            "interact_text": "action.interact.wax_on",
            "particle_on_start": {
              "copper_event": "wax_on"
            }
          },
          // Scrape
          {
            "on_interact": {
              "filters": {
                "all_of": [
                  {
                    "test": "bool_property",
                    "domain": "minecraft:is_waxed",
                    "value": false
                  },
                  {
                    "test": "enum_property",
                    "domain": "minecraft:oxidation_level",
                    "operator": "!=",
                    "value": "unoxidized"
                  },
                  {
                    "test": "is_family",
                    "subject": "other",
                    "value": "player"
                  },
                  {
                    "test": "has_equipment_tag",
                    "domain": "hand",
                    "subject": "other",
                    "value": "minecraft:is_axe"
                  }
                ]
              },
              "event": "minecraft:remove_oxidation_layer"
            },
            "swing": true,
            "interact_text": "action.interact.scrape",
            "particle_on_start": {
              "copper_event": "scrape"
            }
          },
          // Wax off
          {
            "on_interact": {
              "filters": {
                "all_of": [
                  {
                    "test": "bool_property",
                    "domain": "minecraft:is_waxed",
                    "value": true
                  },
                  {
                    "test": "is_family",
                    "subject": "other",
                    "value": "player"
                  },
                  {
                    "test": "has_equipment_tag",
                    "domain": "hand",
                    "subject": "other",
                    "value": "minecraft:is_axe"
                  }
                ]
              },
              "event": "minecraft:wax_off"
            },
            "swing": true,
            "interact_text": "action.interact.wax_off",
            "particle_on_start": {
              "copper_event": "wax_off"
            }
          }
        ]
      }
    },
    "component_groups": {
      "minecraft:copper_aging": {
        "minecraft:timer": {
          // 420-460 minutes, 440 average
          "time": [
            25200,
            27600
          ],
          "looping": true,
          "time_down_event": {
            "event": "minecraft:oxidize_copper"
          }
        }
      },
      "minecraft:interacting_with_chest": {
        "minecraft:body_rotation_blocked": {
        }
      }
    },
    "events": {
      "minecraft:entity_spawned": {
        "add": {
          "component_groups": [
            "minecraft:copper_aging"
          ]
        }
      },
      "minecraft:from_player": {
        "add": {
          "component_groups": [
            "minecraft:copper_aging"
          ]
        }
      },
      "minecraft:from_player_default": {
        "trigger": "minecraft:from_player",
        "set_property": {
          "minecraft:oxidation_level": "unoxidized"
        }
      },
      "minecraft:from_player_exposed": {
        "trigger": "minecraft:from_player",
        "set_property": {
          "minecraft:oxidation_level": "exposed"
        }
      },
      "minecraft:from_player_weathered": {
        "trigger": "minecraft:from_player",
        "set_property": {
          "minecraft:oxidation_level": "weathered"
        }
      },
      "minecraft:from_player_oxidized": {
        "trigger": "minecraft:from_player",
        "set_property": {
          "minecraft:oxidation_level": "oxidized"
        }
      },
      "minecraft:wax_on": {
        "remove": {
          "component_groups": [
            "minecraft:copper_aging"
          ]
        },
        "set_property": {
          "minecraft:is_waxed": true
        }
      },
      "minecraft:wax_off": {
        "add": {
          "component_groups": [
            "minecraft:copper_aging"
          ]
        },
        "set_property": {
          "minecraft:is_waxed": false
        }
      },
      "minecraft:restart_timer": {
        "remove": {
          "component_groups": [
            "minecraft:copper_aging"
          ]
        },
        "add": {
          "component_groups": [
            "minecraft:copper_aging"
          ]
        }
      },
      "minecraft:oxidize_copper": {
        "first_valid": [
          {
            "filters": {
              "test": "enum_property",
              "domain": "minecraft:oxidation_level",
              "value": "unoxidized"
            },
            "set_property": {
              "minecraft:oxidation_level": "exposed"
            }
          },
          {
            "filters": {
              "test": "enum_property",
              "domain": "minecraft:oxidation_level",
              "value": "exposed"
            },
            "set_property": {
              "minecraft:oxidation_level": "weathered"
            }
          },
          {
            "filters": {
              "test": "enum_property",
              "domain": "minecraft:oxidation_level",
              "value": "weathered"
            },
            "set_property": {
              "minecraft:oxidation_level": "oxidized"
            }
          }
        ]
      },
      "minecraft:remove_oxidation_layer": {
        "sequence": [
          {
            // We restart the timer since it could be half way through oxidizing and that is annoying
            "trigger": "minecraft:restart_timer"
          },
          {
            "first_valid": [
              {
                "filters": {
                  "test": "enum_property",
                  "domain": "minecraft:oxidation_level",
                  "value": "exposed"
                },
                "set_property": {
                  "minecraft:oxidation_level": "unoxidized"
                }
              },
              {
                "filters": {
                  "test": "enum_property",
                  "domain": "minecraft:oxidation_level",
                  "value": "weathered"
                },
                "set_property": {
                  "minecraft:oxidation_level": "exposed"
                }
              },
              {
                "filters": {
                  "test": "enum_property",
                  "domain": "minecraft:oxidation_level",
                  "value": "oxidized"
                },
                "set_property": {
                  "minecraft:oxidation_level": "weathered"
                }
              }
            ]
          }
        ]
      },
      "minecraft:transport_items.start_take_succeed": {
        "add": {
          "component_groups": [
            "minecraft:interacting_with_chest"
          ]
        },
        "set_property": {
          "minecraft:chest_interaction": "take"
        }
      },
      "minecraft:transport_items.start_take_fail": {
        "add": {
          "component_groups": [
            "minecraft:interacting_with_chest"
          ]
        },
        "set_property": {
          "minecraft:chest_interaction": "take_fail"
        }
      },
      "minecraft:transport_items.start_place_succeed": {
        "add": {
          "component_groups": [
            "minecraft:interacting_with_chest"
          ]
        },
        "set_property": {
          "minecraft:chest_interaction": "put"
        }
      },
      "minecraft:transport_items.start_place_fail": {
        "add": {
          "component_groups": [
            "minecraft:interacting_with_chest"
          ]
        },
        "set_property": {
          "minecraft:chest_interaction": "put_fail"
        }
      },
      "minecraft:transport_items.stop_interaction": {
        "remove": {
          "component_groups": [
            "minecraft:interacting_with_chest"
          ]
        },
        "set_property": {
          "minecraft:chest_interaction": "none"
        }
      }
    }
  }
}
